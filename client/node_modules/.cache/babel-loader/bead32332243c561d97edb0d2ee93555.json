{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\nvar _getusermedia = require('./getusermedia');\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\nvar _getdisplaymedia = require('./getdisplaymedia');\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\nvar _utils = require('../utils');\nvar utils = _interopRequireWildcard(_utils);\nvar _filtericeservers = require('./filtericeservers');\nvar _rtcpeerconnectionShim = require('rtcpeerconnection-shim');\nvar _rtcpeerconnectionShim2 = _interopRequireDefault(_rtcpeerconnectionShim);\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n    newObj.default = obj;\n    return newObj;\n  }\n}\nfunction shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function set(value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(window, browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}","map":{"version":3,"names":["Object","defineProperty","exports","value","shimGetDisplayMedia","shimGetUserMedia","undefined","_getusermedia","require","enumerable","get","_getdisplaymedia","shimPeerConnection","shimReplaceTrack","_utils","utils","_interopRequireWildcard","_filtericeservers","_rtcpeerconnectionShim","_rtcpeerconnectionShim2","_interopRequireDefault","obj","__esModule","default","newObj","key","prototype","hasOwnProperty","call","window","browserDetails","RTCIceGatherer","RTCIceCandidate","args","RTCSessionDescription","version","origMSTEnabled","getOwnPropertyDescriptor","MediaStreamTrack","set","ev","Event","enabled","dispatchEvent","RTCRtpSender","_dtmf","track","kind","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","RTCPeerConnection","config","iceServers","filterIceServers","log","replaceTrack","setTrack"],"sources":["E:/PFE/client/node_modules/webrtc-adapter/dist/edge/edge_shim.js"],"sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.shimGetDisplayMedia = exports.shimGetUserMedia = undefined;\n\nvar _getusermedia = require('./getusermedia');\n\nObject.defineProperty(exports, 'shimGetUserMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getusermedia.shimGetUserMedia;\n  }\n});\n\nvar _getdisplaymedia = require('./getdisplaymedia');\n\nObject.defineProperty(exports, 'shimGetDisplayMedia', {\n  enumerable: true,\n  get: function get() {\n    return _getdisplaymedia.shimGetDisplayMedia;\n  }\n});\nexports.shimPeerConnection = shimPeerConnection;\nexports.shimReplaceTrack = shimReplaceTrack;\n\nvar _utils = require('../utils');\n\nvar utils = _interopRequireWildcard(_utils);\n\nvar _filtericeservers = require('./filtericeservers');\n\nvar _rtcpeerconnectionShim = require('rtcpeerconnection-shim');\n\nvar _rtcpeerconnectionShim2 = _interopRequireDefault(_rtcpeerconnectionShim);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      var origMSTEnabled = Object.getOwnPropertyDescriptor(window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set: function set(value) {\n          origMSTEnabled.set.call(this, value);\n          var ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get: function get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  var RTCPeerConnectionShim = (0, _rtcpeerconnectionShim2.default)(window, browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = (0, _filtericeservers.filterIceServers)(config.iceServers, browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nfunction shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender && !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack = window.RTCRtpSender.prototype.setTrack;\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}